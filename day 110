/**
 * Dynamic pricing service
 */

function calculateDynamicPrice(product, demandFactor) {
    let price = product.basePrice;

    if (demandFactor > 1.2) {
        price *= 1.1;
    } else if (demandFactor < 0.8) {
        price *= 0.95;
    }

    return Math.round(price);
}

function applyFestivalDiscount(price, isFestival) {
    return isFestival ? price * 0.9 : price;
}

module.exports = {
    calculateDynamicPrice,
    applyFestivalDiscount
};
/**
 * Handles bulk operations safely
 */

async function bulkProcess(items, handler) {
    const results = [];

    for (const item of items) {
        try {
            const result = await handler(item);
            results.push({ item, status: "SUCCESS", result });
        } catch (error) {
            results.push({ item, status: "FAILED", error: error.message });
        }
    }

    return results;
}

module.exports = { bulkProcess };
