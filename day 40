/**
 * Order business logic
 */

const Order = require("../models/order.model");

async function placeOrder(userId, items) {
    const totalAmount = items.reduce(
        (sum, item) => sum + item.price * item.quantity,
        0
    );

    const order = new Order({
        userId,
        items,
        totalAmount
    });

    return await order.save();
}

async function updateOrderStatus(orderId, status) {
    return await Order.findByIdAndUpdate(
        orderId,
        { status },
        { new: true }
    );
}

module.exports = { placeOrder, updateOrderStatus };
